# 🚀 ROADMAP - МИГРАЦИЯ НА PREPROD

**Baumaster Frankfurt - План развертывания**  
**Домен**: https://baumeister.page.gd  
**Хостинг**: InfinityFree (cPanel)  
**Дата создания**: 22 сентября 2025

---

## 📋 ОБЗОР ПРОЕКТА

### 🎯 Цель миграции

Перенос локального проекта Baumaster на предпрод сервер InfinityFree с доменом baumeister.page.gd для тестирования и подготовки к production.

### 🔧 Технические детали

- **Протокол**: FTP (ftpupload.net:21)
- **Пользователь**: if0_39768140
- **Пароль**: QFDnn5XPeMt
- **Панель управления**: https://dash.infinityfree.com/accounts/if0_39768140
- **Домен**: https://baumeister.page.gd

---

## 📅 ЭТАПЫ МИГРАЦИИ

### 🔥 ЭТАП 1: ПОДГОТОВКА (День 1)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 2-3 часа

#### 1.1 Анализ текущего состояния

- [x] ✅ Проанализировать структуру проекта
- [x] ✅ Проверить зависимости и конфигурацию
- [x] ✅ Создать список файлов для загрузки

#### 1.2 Подготовка файлов

- [ ] 🔄 Создать production конфигурацию
- [ ] 🔄 Оптимизировать файлы для production
- [ ] 🔄 Подготовить базу данных
- [ ] 🔄 Создать .htaccess для Apache
- [ ] 🔄 Настроить пути и URL

#### 1.3 Создание бэкапа

- [ ] 🔄 Создать полный бэкап локального проекта
- [ ] 🔄 Экспортировать данные базы данных
- [ ] 🔄 Сохранить загруженные файлы

---

### 🌐 ЭТАП 2: ЗАГРУЗКА ФАЙЛОВ (День 1-2)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 3-4 часа

#### 2.1 Подключение к FTP

- [ ] 🔄 Настроить FTP соединение
- [ ] 🔄 Проверить доступ к серверу
- [ ] 🔄 Создать структуру папок

#### 2.2 Загрузка основных файлов

- [ ] 🔄 Загрузить PHP файлы (54 файла)
- [ ] 🔄 Загрузить CSS и JS (оптимизированные)
- [ ] 🔄 Загрузить изображения и ресурсы
- [ ] 🔄 Создать папки для загрузок

#### 2.3 Настройка прав доступа

- [ ] 🔄 Установить права 755 для папок
- [ ] 🔄 Установить права 644 для файлов
- [ ] 🔄 Настроить права для папки uploads (777)

---

### ⚙️ ЭТАП 3: КОНФИГУРАЦИЯ (День 2)

**Приоритет**: ВЫСОКИЙ  
**Время**: 2-3 часа

#### 3.1 Обновление конфигурации

- [ ] 🔄 Изменить SITE_URL на https://baumeister.page.gd
- [ ] 🔄 Настроить пути для production
- [ ] 🔄 Отключить DEBUG_MODE
- [ ] 🔄 Настроить логирование

#### 3.2 Настройка базы данных

- [ ] 🔄 Создать SQLite базу на сервере с тестовыми данными (точно как в локальной)
- [ ] 🔄 Проверить подключение к базе через сайт (убедиться, что соединение успешно)
- [ ] 🔄 Открыть сайт и убедиться, что информация из базы отображается корректно
- [ ] 🔄 Проверить, где физически находится файл базы данных на сервере
- [ ] 🔄 Посмотреть структуру и содержимое базы через phpMyAdmin или консоль
- [ ] 🔄 Убедиться, что можно подключиться к базе с теми же данными, что и на локальной машине
- [ ] 🔄 Проверить права доступа к файлу базы данных и папке, где он хранится

#### 3.3 Настройка .htaccess

- [ ] 🔄 Создать правила для Apache
- [ ] 🔄 Настроить редиректы
- [ ] 🔄 Включить сжатие Gzip
- [ ] 🔄 Настроить кэширование

---

### 🔧 ЭТАП 4: НАСТРОЙКА СЕРВЕРА (День 2-3)

**Приоритет**: ВЫСОКИЙ  
**Время**: 2-3 часа

#### 4.1 Настройка домена

- [ ] 🔄 Проверить привязку домена
- [ ] 🔄 Настроить DNS записи
- [ ] 🔄 Проверить SSL сертификат

#### 4.2 Настройка PHP

- [ ] 🔄 Проверить версию PHP (7.4+)
- [ ] 🔄 Включить необходимые расширения
- [ ] 🔄 Настроить лимиты памяти и времени

#### 4.3 Настройка Apache

- [ ] 🔄 Проверить модули Apache
- [ ] 🔄 Настроить виртуальные хосты
- [ ] 🔄 Проверить работу mod_rewrite

---

### 🧪 ЭТАП 5: ТЕСТИРОВАНИЕ (День 3)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 3-4 часа

#### 5.1 Функциональное тестирование

- [ ] 🔄 Проверить загрузку главной страницы
- [ ] 🔄 Тестировать все разделы сайта
- [ ] 🔄 Проверить работу форм
- [ ] 🔄 Тестировать загрузку файлов

#### 5.2 Тестирование админ-панели

- [ ] 🔄 Проверить вход в админку
- [ ] 🔄 Тестировать CRUD операции
- [ ] 🔄 Проверить загрузку изображений
- [ ] 🔄 Тестировать экспорт данных

#### 5.3 Тестирование производительности

- [ ] 🔄 Проверить скорость загрузки
- [ ] 🔄 Тестировать на мобильных устройствах
- [ ] 🔄 Проверить работу в разных браузерах

---

### 🔒 ЭТАП 6: БЕЗОПАСНОСТЬ (День 3-4)

**Приоритет**: ВЫСОКИЙ  
**Время**: 2-3 часа

#### 6.1 Настройка безопасности

- [ ] 🔄 Сменить пароли по умолчанию
- [ ] 🔄 Настроить CSRF защиту
- [ ] 🔄 Проверить валидацию данных
- [ ] 🔄 Настроить .htaccess для безопасности

#### 6.2 Проверка безопасности

- [ ] 🔄 Тестировать на SQL injection
- [ ] 🔄 Проверить XSS защиту
- [ ] 🔄 Тестировать CSRF атаки
- [ ] 🔄 Проверить права доступа к файлам

---

### 📧 ЭТАП 7: ИНТЕГРАЦИИ (День 4)

**Приоритет**: СРЕДНИЙ  
**Время**: 2-3 часа

#### 7.1 Email настройки

- [ ] 🔄 Настроить SMTP для отправки писем
- [ ] 🔄 Тестировать контактную форму
- [ ] 🔄 Проверить отправку уведомлений

#### 7.2 SEO настройки

- [ ] 🔄 Создать sitemap.xml
- [ ] 🔄 Настроить robots.txt
- [ ] 🔄 Проверить мета-теги
- [ ] 🔄 Настроить Google Analytics

---

### 🎯 ЭТАП 8: ФИНАЛЬНАЯ ПРОВЕРКА (День 4-5)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 2-3 часа

#### 8.1 Полное тестирование

- [ ] 🔄 Проверить все функции сайта
- [ ] 🔄 Тестировать админ-панель
- [ ] 🔄 Проверить загрузку файлов
- [ ] 🔄 Тестировать формы обратной связи

#### 8.2 Документация

- [ ] 🔄 Обновить документацию
- [ ] 🔄 Создать инструкции по администрированию
- [ ] 🔄 Задокументировать изменения

---

## 📁 СТРУКТУРА ФАЙЛОВ ДЛЯ ЗАГРУЗКИ

### 🔥 Критически важные файлы

```
📁 Корневая папка
├── 📄 index.php (главная страница)
├── 📄 config.php (конфигурация)
├── 📄 database.php (БД)
├── 📄 functions.php (функции)
├── 📄 .htaccess (правила Apache)
└── 📄 robots.txt (SEO)

📁 admin/ (11 файлов)
├── 📄 index.php, login.php, logout.php
├── 📄 portfolio.php, services.php, reviews.php
├── 📄 blog.php, users.php, settings.php
├── 📄 stats.php, seo_analysis.php

📁 components/ (3 файла)
├── 📄 admin_layout.php, auth_layout.php
└── 📄 admin_js.php

📁 assets/ (ресурсы)
├── 📁 css/ (стили)
├── 📁 js/ (скрипты)
├── 📁 images/ (изображения)
└── 📁 uploads/ (загрузки)

📁 data/ (данные)
├── 📄 baumaster.db (SQLite база)
└── 📄 error.log (логи)

📁 lang/ (переводы)
├── 📄 ru.json, de.json, en.json
```

---

## ⚠️ КРИТИЧЕСКИЕ ТОЧКИ ВНИМАНИЯ

### 🚨 Обязательные проверки

1. **Права доступа** - папка uploads должна иметь права 777
2. **База данных** - SQLite файл должен быть доступен для записи
3. **Пути** - все пути должны быть обновлены для production
4. **SSL** - проверить работу HTTPS
5. **Формы** - все формы должны работать корректно

### 🔧 Настройки для production

```php
// config.php изменения
define('SITE_URL', 'https://baumeister.page.gd');
define('DEBUG_MODE', false);
define('LOG_ERRORS', true);
```

### 📝 .htaccess для production

```apache
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Безопасность
<Files "*.db">
    Order Allow,Deny
    Deny from all
</Files>

# Кэширование
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
</IfModule>
```

---

## 🎯 КОНТРОЛЬНЫЕ ТОЧКИ

### ✅ Критерии успешной миграции

1. **Сайт доступен** по адресу https://baumeister.page.gd
2. **Все страницы загружаются** без ошибок
3. **Админ-панель работает** - вход, CRUD операции
4. **Формы функционируют** - контакты, загрузки
5. **База данных работает** - данные сохраняются
6. **Файлы загружаются** - изображения, документы
7. **SSL сертификат активен** - безопасное соединение

### 🚨 План отката

1. **Бэкап** - сохранить текущее состояние
2. **Восстановление** - скрипт восстановления из бэкапа
3. **Тестирование** - проверить работоспособность после отката

---

## 📞 ПОДДЕРЖКА И КОНТАКТЫ

### 🔧 Техническая поддержка

- **Документация**: /docs/ в проекте
- **Логи ошибок**: /data/error.log
- **Техническая документация**: docs/technical.md

### 📋 Чек-лист после миграции

- [ ] Сменить пароль администратора
- [ ] Настроить email уведомления
- [ ] Добавить контент через админ-панель
- [ ] Настроить Google Analytics
- [ ] Создать регулярные бэкапы
- [ ] Настроить мониторинг

---

## 🎉 ОЖИДАЕМЫЙ РЕЗУЛЬТАТ

После успешного завершения всех этапов:

- ✅ **Сайт работает** на https://baumeister.page.gd
- ✅ **Админ-панель доступна** для управления контентом
- ✅ **Все функции протестированы** и работают корректно
- ✅ **Безопасность настроена** и проверена
- ✅ **Производительность оптимизирована**
- ✅ **Готовность к production** подтверждена

---

**🚀 ГОТОВ К НАЧАЛУ МИГРАЦИИ!**

_Создано для Baumaster Frankfurt_  
_Дата: 22 сентября 2025_
