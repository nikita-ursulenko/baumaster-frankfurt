# 🚀 ROADMAP - МИГРАЦИЯ НА ORACLE CLOUD ALWAYS FREE

**Baumaster Frankfurt - План развертывания на Oracle Cloud**  
**Платформа**: Oracle Cloud Always Free  
**Дата создания**: 25 сентября 2025

---

## 📋 ОБЗОР ПРОЕКТА

### 🎯 Цель миграции

Перенос локального проекта Baumaster на Oracle Cloud Always Free для создания полнофункционального предпрода сервера с поддержкой PHP, Python и SSH доступа.

### 🔧 Технические детали

- **Платформа**: Oracle Cloud Infrastructure (OCI)
- **Ресурсы**: 2 VM x86 (1GB RAM, 1 CPU) ИЛИ 4 VM ARM (24GB RAM)
- **Хранилище**: 200GB SSD
- **Трафик**: 10TB в месяц
- **Базы данных**: 2 x Autonomous Database (20GB каждая)

---

## 📅 ЭТАПЫ МИГРАЦИИ

### 🔥 ЭТАП 1: ПОДГОТОВКА И РЕГИСТРАЦИЯ (День 1)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 2-3 часа

#### 1.1 Регистрация на Oracle Cloud

- [ ] 🔄 Зарегистрироваться на [cloud.oracle.com](https://cloud.oracle.com)
- [ ] 🔄 Подтвердить email адрес
- [ ] 🔄 Заполнить профиль (без кредитной карты)
- [ ] 🔄 Выбрать регион (Frankfurt или Amsterdam)

#### 1.2 Создание Compartment

- [ ] 🔄 Создать новый Compartment для проекта
- [ ] 🔄 Настроить политики доступа (IAM)
- [ ] 🔄 Создать пользователя для проекта
- [ ] 🔄 Настроить SSH ключи

#### 1.3 Подготовка локальных файлов

- [x] ✅ Создать production конфигурацию
- [x] ✅ Оптимизировать файлы для production
- [x] ✅ Подготовить базу данных
- [x] ✅ Создать .htaccess для Apache
- [x] ✅ Настроить пути и URL

---

### 🖥️ ЭТАП 2: СОЗДАНИЕ VIRTUAL MACHINE (День 1-2)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 1-2 часа

#### 2.1 Выбор конфигурации VM

- [ ] 🔄 Выбрать тип VM:
  - **ARM Ampere A1** (4 VM, 24GB RAM) - РЕКОМЕНДУЕТСЯ
  - **x86 AMD** (2 VM, 2GB RAM) - альтернатива
- [ ] 🔄 Выбрать образ: Ubuntu 22.04 LTS
- [ ] 🔄 Настроить сетевые параметры
- [ ] 🔄 Создать SSH ключ для доступа

#### 2.2 Запуск и подключение

- [ ] 🔄 Запустить VM instance
- [ ] 🔄 Получить публичный IP адрес
- [ ] 🔄 Подключиться по SSH
- [ ] 🔄 Обновить систему (apt update && apt upgrade)

#### 2.3 Настройка безопасности

- [ ] 🔄 Настроить Security Lists (firewall)
- [ ] 🔄 Открыть порты: 22 (SSH), 80 (HTTP), 443 (HTTPS)
- [ ] 🔄 Настроить fail2ban для защиты SSH
- [ ] 🔄 Создать резервную копию SSH ключей

---

### ⚙️ ЭТАП 3: УСТАНОВКА LAMP СТЕКА (День 2)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 2-3 часа

#### 3.1 Установка Apache

- [ ] 🔄 Установить Apache2: `apt install apache2`
- [ ] 🔄 Включить модули: rewrite, ssl, headers
- [ ] 🔄 Настроить виртуальный хост
- [ ] 🔄 Проверить работу Apache

#### 3.2 Установка PHP

- [ ] 🔄 Установить PHP 8.1: `apt install php8.1 php8.1-cli php8.1-fpm`
- [ ] 🔄 Установить расширения: mysql, sqlite3, gd, curl, zip, xml
- [ ] 🔄 Настроить php.ini для production
- [ ] 🔄 Проверить работу PHP

#### 3.3 Установка MySQL

- [ ] 🔄 Установить MySQL: `apt install mysql-server`
- [ ] 🔄 Настроить безопасность MySQL: `mysql_secure_installation`
- [ ] 🔄 Создать базу данных для проекта
- [ ] 🔄 Создать пользователя для приложения

#### 3.4 Установка дополнительных компонентов

- [ ] 🔄 Установить Python 3.9+: `apt install python3 python3-pip`
- [ ] 🔄 Установить Git: `apt install git`
- [ ] 🔄 Установить Composer: для PHP зависимостей
- [ ] 🔄 Установить Node.js: для frontend инструментов

---

### 📁 ЭТАП 4: ЗАГРУЗКА И НАСТРОЙКА ПРОЕКТА (День 2-3)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 2-3 часа

#### 4.1 Загрузка файлов

- [ ] 🔄 Загрузить проект через SCP/SFTP
- [ ] 🔄 Распаковать архив в /var/www/html/
- [ ] 🔄 Настроить права доступа (chmod/chown)
- [ ] 🔄 Проверить структуру файлов

#### 4.2 Настройка базы данных

- [ ] 🔄 Импортировать данные из SQLite в MySQL
- [ ] 🔄 Создать скрипт миграции данных
- [ ] 🔄 Обновить config.php для MySQL
- [ ] 🔄 Протестировать подключение к БД

#### 4.3 Настройка веб-сервера

- [ ] 🔄 Настроить Apache виртуальный хост
- [ ] 🔄 Настроить DocumentRoot на папку проекта
- [ ] 🔄 Включить mod_rewrite для .htaccess
- [ ] 🔄 Настроить логирование Apache

---

### 🔒 ЭТАП 5: НАСТРОЙКА БЕЗОПАСНОСТИ И SSL (День 3)

**Приоритет**: ВЫСОКИЙ  
**Время**: 1-2 часа

#### 5.1 Настройка SSL сертификатов

- [ ] 🔄 Установить Certbot: `apt install certbot python3-certbot-apache`
- [ ] 🔄 Получить SSL сертификат Let's Encrypt
- [ ] 🔄 Настроить автоматическое обновление сертификатов
- [ ] 🔄 Проверить работу HTTPS

#### 5.2 Дополнительная безопасность

- [ ] 🔄 Настроить fail2ban для защиты от атак
- [ ] 🔄 Настроить UFW firewall
- [ ] 🔄 Обновить пароли по умолчанию
- [ ] 🔄 Настроить регулярные обновления системы

#### 5.3 Настройка мониторинга

- [ ] 🔄 Установить htop для мониторинга ресурсов
- [ ] 🔄 Настроить логирование ошибок
- [ ] 🔄 Создать скрипт мониторинга дискового пространства
- [ ] 🔄 Настроить уведомления о проблемах

---

### 🐍 ЭТАП 6: НАСТРОЙКА PYTHON ОКРУЖЕНИЯ (День 3-4)

**Приоритет**: ВЫСОКИЙ  
**Время**: 1-2 часа

#### 6.1 Установка Python зависимостей

- [ ] 🔄 Создать виртуальное окружение Python
- [ ] 🔄 Установить необходимые пакеты (pip install)
- [ ] 🔄 Настроить PATH для Python скриптов
- [ ] 🔄 Протестировать выполнение Python кода

#### 6.2 Настройка автоматизации

- [ ] 🔄 Создать cron задачи для регулярных скриптов
- [ ] 🔄 Настроить логирование Python скриптов
- [ ] 🔄 Создать скрипты для бэкапа данных
- [ ] 🔄 Настроить мониторинг выполнения задач

#### 6.3 Интеграция с PHP

- [ ] 🔄 Создать API endpoints для взаимодействия PHP-Python
- [ ] 🔄 Настроить очереди задач (если нужно)
- [ ] 🔄 Протестировать интеграцию компонентов
- [ ] 🔄 Настроить обработку ошибок

---

### 🌐 ЭТАП 7: НАСТРОЙКА ДОМЕНА И DNS (День 4)

**Приоритет**: ВЫСОКИЙ  
**Время**: 1-2 часа

#### 7.1 Настройка домена

- [ ] 🔄 Подключить собственный домен (если есть)
- [ ] 🔄 Настроить DNS записи (A, CNAME)
- [ ] 🔄 Обновить SSL сертификат для домена
- [ ] 🔄 Настроить редиректы www/non-www

#### 7.2 Альтернатива - Oracle домен

- [ ] 🔄 Использовать публичный IP как временный домен
- [ ] 🔄 Настроить бесплатный поддомен (если доступен)
- [ ] 🔄 Создать простую страницу-заглушку
- [ ] 🔄 Подготовить к подключению собственного домена

---

### 🧪 ЭТАП 8: ТЕСТИРОВАНИЕ И ОПТИМИЗАЦИЯ (День 4-5)

**Приоритет**: КРИТИЧЕСКИЙ  
**Время**: 2-3 часа

#### 8.1 Функциональное тестирование

- [ ] 🔄 Проверить загрузку главной страницы
- [ ] 🔄 Тестировать все разделы сайта
- [ ] 🔄 Проверить работу админ-панели
- [ ] 🔄 Тестировать загрузку файлов

#### 8.2 Тестирование производительности

- [ ] 🔄 Проверить скорость загрузки страниц
- [ ] 🔄 Тестировать под нагрузкой
- [ ] 🔄 Оптимизировать базу данных
- [ ] 🔄 Настроить кэширование Apache

#### 8.3 Тестирование безопасности

- [ ] 🔄 Проверить работу HTTPS
- [ ] 🔄 Тестировать защиту от SQL injection
- [ ] 🔄 Проверить XSS защиту
- [ ] 🔄 Тестировать CSRF защиту

---

### 📊 ЭТАП 9: МОНИТОРИНГ И БЭКАПЫ (День 5)

**Приоритет**: ВЫСОКИЙ  
**Время**: 1-2 часа

#### 9.1 Настройка мониторинга

- [ ] 🔄 Настроить мониторинг ресурсов сервера
- [ ] 🔄 Создать алерты для критических событий
- [ ] 🔄 Настроить логирование веб-приложения
- [ ] 🔄 Создать дашборд для мониторинга

#### 9.2 Настройка бэкапов

- [ ] 🔄 Настроить автоматические бэкапы базы данных
- [ ] 🔄 Создать бэкапы файлов проекта
- [ ] 🔄 Настроить ротацию бэкапов
- [ ] 🔄 Протестировать восстановление из бэкапа

---

## 🔧 ТЕХНИЧЕСКАЯ КОНФИГУРАЦИЯ

### Конфигурация Apache Virtual Host

```apache
<VirtualHost *:80>
    ServerName baumaster.oracle.com
    DocumentRoot /var/www/html/baumaster
    DirectoryIndex index.php

    <Directory /var/www/html/baumaster>
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/baumaster_error.log
    CustomLog ${APACHE_LOG_DIR}/baumaster_access.log combined
</VirtualHost>
```

### Конфигурация PHP для Production

```ini
; /etc/php/8.1/apache2/php.ini
display_errors = Off
log_errors = On
error_log = /var/log/php_errors.log
upload_max_filesize = 10M
post_max_size = 10M
max_execution_time = 300
memory_limit = 256M
```

### Конфигурация MySQL

```sql
-- Создание базы данных
CREATE DATABASE baumaster_production;
CREATE USER 'baumaster_user'@'localhost' IDENTIFIED BY 'secure_password';
GRANT ALL PRIVILEGES ON baumaster_production.* TO 'baumaster_user'@'localhost';
FLUSH PRIVILEGES;
```

### Обновленный config.php для Oracle Cloud

```php
<?php
// Oracle Cloud конфигурация
define('SITE_URL', 'https://your-domain.com');
define('DEBUG_MODE', false);
define('LOG_ERRORS', true);

// База данных MySQL
define('DB_TYPE', 'mysql');
define('DB_HOST', 'localhost');
define('DB_NAME', 'baumaster_production');
define('DB_USER', 'baumaster_user');
define('DB_PASS', 'secure_password');
define('DB_CHARSET', 'utf8mb4');

// Пути для Oracle Cloud
define('ABSPATH', '/var/www/html/baumaster/');
define('DATA_PATH', ABSPATH . 'data/');
define('UPLOADS_PATH', ABSPATH . 'assets/uploads/');

// Безопасность
define('HASH_ALGO', 'sha256');
define('CSRF_TOKEN_NAME', '_csrf_token');
define('MAX_LOGIN_ATTEMPTS', 5);
define('LOGIN_LOCKOUT_TIME', 900);
```

---

## 📊 ОЖИДАЕМЫЕ РЕСУРСЫ

### Использование ресурсов Oracle Cloud:

- **CPU**: 10-20% (для PHP веб-сайта)
- **RAM**: 200-500MB (из 1GB доступных)
- **Диск**: 2-5GB (из 200GB доступных)
- **Трафик**: 1-10GB в месяц (из 10TB доступных)

### Производительность:

- **Время отклика**: < 200ms
- **Пропускная способность**: 100-500 запросов/минуту
- **Доступность**: 99.9% (Oracle Cloud SLA)

---

## ⚠️ КРИТИЧЕСКИЕ ТОЧКИ ВНИМАНИЯ

### 🚨 Обязательные проверки

1. **SSH доступ** - должен работать стабильно
2. **База данных** - MySQL должна быть доступна
3. **SSL сертификат** - автоматическое обновление
4. **Права доступа** - правильные chmod/chown
5. **Бэкапы** - регулярное создание и тестирование

### 🔧 Настройки безопасности

- Регулярные обновления системы
- Мониторинг логов на предмет атак
- Ограничение SSH доступа по IP
- Настройка fail2ban

### 📈 Мониторинг

- Использование ресурсов сервера
- Производительность базы данных
- Доступность веб-сайта
- Ошибки в логах

---

## 🎯 КОНТРОЛЬНЫЕ ТОЧКИ

### ✅ Критерии успешной миграции

1. **Сайт доступен** по публичному IP или домену
2. **Все страницы загружаются** без ошибок
3. **Админ-панель работает** - вход, CRUD операции
4. **Формы функционируют** - контакты, загрузки
5. **База данных работает** - данные сохраняются
6. **Python скрипты выполняются** через SSH
7. **SSL сертификат активен** - HTTPS работает
8. **Бэкапы создаются** автоматически

### 🚨 План отката

1. **Бэкап локальной версии** - всегда доступен
2. **Экспорт данных** из Oracle Cloud MySQL
3. **Восстановление** на локальном сервере
4. **Тестирование** работоспособности

---

## 📞 ПОДДЕРЖКА И КОНТАКТЫ

### 🔧 Oracle Cloud ресурсы

- **Документация**: [docs.oracle.com](https://docs.oracle.com)
- **Сообщество**: Oracle Cloud форумы
- **Поддержка**: Через Oracle Cloud консоль

### 📋 Наши ресурсы

- **Документация**: /docs/ в проекте
- **Логи**: /var/log/ на сервере
- **Мониторинг**: htop, systemctl status

### 🔧 Полезные команды

```bash
# Статус сервисов
sudo systemctl status apache2
sudo systemctl status mysql
sudo systemctl status ssh

# Логи
sudo tail -f /var/log/apache2/error.log
sudo tail -f /var/log/mysql/error.log

# Ресурсы
htop
df -h
free -m
```

---

## 🎉 ОЖИДАЕМЫЙ РЕЗУЛЬТАТ

После успешного завершения всех этапов:

- ✅ **Сайт работает** на Oracle Cloud с публичным IP
- ✅ **Админ-панель доступна** для управления контентом
- ✅ **Python скрипты выполняются** через SSH
- ✅ **База данных MySQL** работает стабильно
- ✅ **SSL сертификат** обеспечивает безопасность
- ✅ **Автоматические бэкапы** защищают данные
- ✅ **Мониторинг** отслеживает состояние сервера
- ✅ **Готовность к production** подтверждена

---

## 📈 ПРЕИМУЩЕСТВА ORACLE CLOUD

### ✅ Для нашего проекта:

1. **Полный контроль** - SSH доступ для любых задач
2. **Профессиональная инфраструктура** - надежность Oracle
3. **Бесплатно навсегда** - без ограничений по времени
4. **Масштабируемость** - легко увеличить ресурсы
5. **Безопасность** - корпоративный уровень защиты
6. **Производительность** - высокоскоростная сеть

### 💰 Экономия:

- **Бесплатно** вместо $10-50/месяц за хостинг
- **Без кредитной карты** - полная безопасность
- **Неограниченное время** - в отличие от AWS Free Tier

---

**🚀 ГОТОВ К МИГРАЦИИ НА ORACLE CLOUD ALWAYS FREE!**

_Этот план обеспечит профессиональную инфраструктуру для проекта Baumaster Frankfurt с полным контролем и бесплатным использованием._
