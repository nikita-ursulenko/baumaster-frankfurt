# ROADMAP

## Текущая задача: Создание системы перевода с автоматической историей и Context7

**Цель**: Создать кнопку перевода текста, реализовать систему многоязычности с разными директориями (/de) для SEO, основной сайт на русском языке, интегрировать автоматическую историю и Context7

### Задачи:

- [ ] **Анализ текущей системы интернационализации**
  - URL: `http://localhost/admin/settings.php`
  - Изучить существующие файлы переводов в `/lang/`
  - Проанализировать текущую структуру языковых файлов (de.json, en.json, ru.json)
  - Проверить интеграцию с `integrations/i18n.php`
  - Оценить текущую реализацию переключения языков
  - Сделать скриншот текущего состояния

- [ ] **Проектирование архитектуры многоязычности**
  - Определить структуру URL для разных языков:
    - `/` - основной язык (русский)
    - `/de/` - немецкий язык
    - `/en/` - английский язык
  - Спроектировать систему маршрутизации
  - Определить структуру файлов для каждого языка
  - Спланировать SEO-оптимизацию (hreflang, sitemap)

- [ ] **Создание системы маршрутизации**
  - Создать файл `.htaccess` для обработки многоязычных URL
  - Реализовать функцию определения языка из URL
  - Создать функцию редиректа на правильную языковую версию
  - Добавить обработку 404 ошибок для языковых версий

- [ ] **Создание языковых директорий**
  - Создать директорию `/de/` с копиями основных файлов
  - Создать директорию `/en/` с копиями основных файлов
  - Настроить правильные пути для ресурсов в каждой директории
  - Создать языковые версии всех основных страниц

- [ ] **Реализация кнопки перевода**
  - Создать компонент кнопки перевода в `ux/components.php`
  - Добавить стили для кнопки перевода
  - Реализовать JavaScript для переключения языков
  - Добавить иконки флагов для визуального отображения
  - Интегрировать кнопку во все страницы сайта

- [ ] **Обновление языковых файлов**
  - Расширить файлы переводов в `/lang/`
  - Добавить переводы для всех текстов сайта
  - Создать переводы для админ-панели
  - Добавить переводы для форм и уведомлений
  - Сделать русский язык основным (по умолчанию)

- [ ] **Интеграция с существующими компонентами**
  - Обновить `ux/layout.php` для поддержки многоязычности
  - Модифицировать `ux/data.php` для языковых версий
  - Обновить все страницы для работы с переводами
  - Интегрировать переводы в админ-панель

- [ ] **SEO-оптимизация**
  - Добавить hreflang теги в HTML
  - Создать многоязычный sitemap
  - Обновить robots.txt для разных языков
  - Добавить языковые мета-теги
  - Реализовать канонические URL

- [ ] **Создание языковых версий страниц**
  - Создать немецкую версию главной страницы `/de/index.php`
  - Создать английскую версию главной страницы `/en/index.php`
  - Адаптировать все основные страницы для каждого языка
  - Обеспечить корректную работу всех функций на каждом языке

- [ ] **Интеграция Context7 для автоматической истории**
  - Изучить возможности Context7 для истории переводов
  - Интегрировать Context7 API для автоматического перевода
  - Создать систему сохранения истории переводов
  - Реализовать автоматическое обновление переводов
  - Добавить интерфейс для управления историей переводов

- [ ] **Создание системы автоматической истории**
  - Создать таблицу в БД для хранения истории переводов
  - Реализовать автоматическое сохранение изменений переводов
  - Создать интерфейс для просмотра истории
  - Добавить возможность отката к предыдущим версиям
  - Реализовать уведомления об изменениях

- [ ] **Тестирование системы перевода**
  - Протестировать переключение языков
  - Проверить корректность отображения переводов
  - Тестировать SEO-элементы (hreflang, sitemap)
  - Проверить работу на разных устройствах
  - Протестировать производительность
  - Протестировать интеграцию с Context7

- [ ] **Создание скриншотов для удостоверения**
  - Скриншот кнопки перевода на сайте
  - Скриншоты разных языковых версий
  - Скриншот SEO-элементов (hreflang)
  - Скриншот многоязычного sitemap
  - Скриншот языковых директорий в файловой системе
  - Скриншот системы автоматической истории
  - Скриншот интеграции с Context7

## Ожидаемый результат

- Работающая кнопка перевода на всех страницах сайта
- SEO-оптимизированные URL с языковыми директориями (/de, /en)
- Основной сайт на русском языке
- Корректное отображение контента на всех языках
- Правильная индексация поисковыми системами
- Автоматическая история переводов
- Интеграция с Context7 для улучшения качества переводов

## Технические детали

### Структура URL:
- `https://baumaster.de/` - русский (основной)
- `https://baumaster.de/de/` - немецкий
- `https://baumaster.de/en/` - английский

### Файловая структура:
```
/
├── de/
│   ├── index.php
│   ├── about.php
│   ├── services.php
│   └── ...
├── en/
│   ├── index.php
│   ├── about.php
│   ├── services.php
│   └── ...
├── lang/
│   ├── de.json
│   ├── ru.json
│   └── en.json
└── translations/
    ├── history/
    │   ├── de/
    │   ├── en/
    │   └── ru/
    └── context7/
        ├── api.php
        └── cache/
```

### SEO элементы:
- Hreflang теги для указания языковых версий
- Многоязычный sitemap.xml
- Канонические URL для каждой языковой версии
- Языковые мета-теги

### Context7 интеграция:
- Автоматический перевод контента
- История изменений переводов
- Кэширование переводов
- API для управления переводами

## Файлы для создания/модификации

### Новые файлы:
- `.htaccess` - маршрутизация многоязычных URL
- `/de/index.php`, `/de/about.php`, etc. - немецкие версии
- `/en/index.php`, `/en/about.php`, etc. - английские версии
- `sitemap-multilang.xml` - многоязычный sitemap
- `translations/history/` - директория для истории переводов
- `translations/context7/` - интеграция с Context7

### Модифицируемые файлы:
- `ux/components.php` - кнопка перевода
- `ux/layout.php` - поддержка многоязычности
- `ux/data.php` - языковые данные
- `integrations/i18n.php` - система переводов
- `lang/*.json` - файлы переводов
- `seo/sitemap.php` - многоязычный sitemap
- `database.php` - таблицы для истории переводов

## Языки для поддержки

1. **Русский (ru)** - основной язык
2. **Немецкий (de)** - для немецкоязычных клиентов
3. **Английский (en)** - для международных клиентов

## Приоритеты реализации

1. **Высокий приоритет**: Основная функциональность перевода
2. **Высокий приоритет**: Context7 интеграция
3. **Средний приоритет**: SEO-оптимизация
4. **Средний приоритет**: Автоматическая история
5. **Низкий приоритет**: Дополнительные языки

## Этапы выполнения

### Этап 1: Подготовка (1-2 дня)
- Анализ текущей системы
- Проектирование архитектуры
- Создание языковых директорий

### Этап 2: Основная функциональность (2-3 дня)
- Система маршрутизации
- Кнопка перевода
- Обновление языковых файлов

### Этап 3: Интеграция (2-3 дня)
- Context7 интеграция
- Система автоматической истории
- SEO-оптимизация

### Этап 4: Тестирование (1-2 дня)
- Тестирование всех функций
- Создание скриншотов
- Финальная проверка

**Общее время выполнения**: 6-10 дней